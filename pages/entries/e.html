<!-- https://sourceforge.net/projects/freepascal/files/Win32/3.2.2/ -->

<!DOCTYPE html>

<!-- Inspiration from here https://glenwing.github.io/ -->

<meta property="og:url"                content="https://p4yl0ad.github.io/" />
<meta property="og:type"               content="article" />
<meta property="og:title"              content="The lost notes" />
<meta property="og:description"        content="" />
<meta property="og:image"              content="pages/bart.jpg" />
<iframe src="https://profile-counter.glitch.me/p4yl0ad/count.svg" style="position: absolute;width:0;height:0;border:0;"></iframe>

<meta name="viewport" content="width=device-width">

<style>
    html,
    body {
        margin: 0;
        height: 100%;
        padding: 0;
    }

    body {
        font-family:        "Consolas", "Inconsolata", "Lucida Console", Monospace;
        font-size:          15px;
        line-height:        120%;
        min-height:         100%;
    }

    .number {
        font-family:        "Consolas", "Inconsolata", "Lucida Console", Monospace;
        font-size:          15px;
    }

    div.wrapper {
        min-height: 100%;
        position: relative;
    }

    div.main {
        border:             0px solid transparent;
        font-size:          15px;
        padding-bottom:     48px;
        margin-left:        auto;
        margin-right:       auto;
    }

    div.footer {
        width:              100%;
        position:           absolute;
        bottom:             0;
        left:               0;
        vertical-align:     middle;
        background-color:   #DDDDDD;
        cursor:             pointer;
        min-width:          512px;
        padding-top:        10px;
        padding-bottom:     10px;
        font-family:        "Consolas", "Inconsolata", "Lucida Console", Monospace;
        font-size:          15px;
    }
    div.footer a {
        color:              #888888;
        text-decoration:    none;
        vertical-align:     middle;
        padding:            10px;
    }

    div.header {
        font-family:        "Consolas", "Inconsolata", "Lucida Console", Monospace;
        line-height:        120%;
        font-weight:        bold;
        font-size:          16px;
        padding-left:       16px;
        padding-right:      16px;
        padding-top:        12px;
        padding-bottom:     0px;
        min-width:          480px;
    }
    div.header span {
        color:              #000000;
    }
    div.header i.back_arrow {
        transform:rotate(90deg) scale(0.75);
        line-height:0;
        position:relative;
        bottom:-0.2em;
    }

    span.title {
        font-weight: bold;
    }

    table, tr, td {
        padding: 4px;
        border: 0px solid transparent;
    }

    a:link {
        color: #777777;
        text-decoration: none;
    }
    a:visited {
        color: #777777;
        text-decoration: none;
    }
    a:hover {
        color: #000000;
        text-decoration: underline;
    }
    a:active {
        color: #000000;
        text-decoration: underline;
    }

    hr {
        height:             1px;
        border-width:       0;
        color:              #888888;
        background-color:   #888888;
    }
</style>
<html>

<head>
    <title>p4 blog</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
</head>

<body>
<div class="wrapper">
    <div class="main">
        <div class="header">
            <a href="https://p4yl0ad.github.io"><i class="material-icons back_arrow">subdirectory_arrow_left</i>&nbsp;Back to index</a>
            Writing a delphi (Object Pascal) shellcode loader ( win32 )
            <hr />
        </div>
        <table style="padding-left:20px;">
            <tr><td><span class="title">Forward</span>
            <p>
                First there was Pascal, then there was Object Pascal which could be written in the Delphi IDE, now there is Delphi which is Object Pascal.
                A little confusing, I will use Object Pascal, Delphi and Pascal interchangeably throughout.

                Using Free Pascal 3.2.2 - https://kumisystems.dl.sourceforge.net/project/freepascal/Win32/3.2.2/fpc-3.2.2.win32.and.win64.exe
                Install location - C:\FPC\3.2.2
                Custom install - Free Pascal for Win64 (x64)
            </p>


            <tr><td><span class="title">Inspiration</span>
                <p>
                A long long time ago, I came across 0xsp's work in Pascal and was interested in seeing the capabilities which were possible. 
                I started fucking around in the language during C19 lockdown writing a small utility for my boss to run on his work laptop in order to keep his activity in teams / their chat software in the green while he did other stuff lol.
                It was a toxic relationship between pascal and myself, super verbose and control was able to be gained but it had its quirks and documentation from ~2008 which pissed me off. 

                (0xsp/zux0x3a/lawrenceamer https://github.com/lawrenceamer)
            </p>

            <tr><td><span class="title">Using win32 API from pascal</span>
                <p>
                    some text here 
                    <pre><code>
                        program HelloWorldMsg;
                        
                        uses Windows;
    
                        begin
                            MessageBox(0, 'Hello World Title', 'Hello World Body', 0);
                        end.
                    </code></pre>
                    
                    <pre><code>
                        C:\FPC\3.2.2\bin\i386-win32>fpc -Px86_64 -Twin64 C:\Users\p4\Desktop\hello.pas
    
                        Free Pascal Compiler version 3.2.2 [2021/05/15] for x86_64
                        Copyright (c) 1993-2021 by Florian Klaempfl and others
                        Target OS: Win64 for x64
                        Compiling C:\Users\p4\Desktop\hello.pas
                        Linking C:\Users\p4\Desktop\hello.exe
                        6 lines compiled, 0.1 sec, 32416 bytes code, 1524 bytes data
                    </code></pre>
                </p>
    
            </td></tr>
        </table>
    </div>

    <div class="footer" onclick="document.getElementById('profile_link').click();">
        <a id="profile_link" target="_blank" href="https://github.com/p4yl0ad">GitHub</a>
        <a id="profile_link" target="_blank" href="https://twitter.com/PUNICODE_STRING">Twitter</a>
    </div>
</div>
</body>
</html>